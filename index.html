<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Impresión 3D</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .field {
            margin-bottom: 15px;
        }
        .field label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .field input, .field select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .section {
            margin-bottom: 20px;
        }
        .section h2 {
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .results {
            margin-top: 20px;
            padding: 15px;
            background-color: #eef;
            border-radius: 5px;
        }
        .results div {
            margin-bottom: 10px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculadora de Impresión 3D</h1>
        <form id="calculator-form">

            <!-- Información de la impresión -->
            <div class="section">
                <h2>Información de la Impresión</h2>
                <div class="field">
                    <label for="job-name">Nombre del Trabajo:</label>
                    <input type="text" id="job-name" placeholder="Nombre del trabajo">
                </div>
                <div class="field">
                    <label for="currency">Moneda:</label>
                    <select id="currency">
                        <option value="USD">Dólar (USD)</option>
                        <option value="COP">Peso Colombiano (COP)</option>
                    </select>
                </div>
                <div class="field">
                    <label for="print-time">Tiempo de Impresión (horas):</label>
                    <input type="number" id="print-time" value="5" step="0.1">
                </div>
                <div class="field">
                    <label for="model-weight">Peso del Modelo (g):</label>
                    <input type="number" id="model-weight" value="100" step="0.1">
                </div>
            </div>

            <!-- Filamento -->
            <div class="section">
                <h2>Filamento</h2>
                <div class="field">
                    <label for="filament-type">Tipo de Filamento:</label>
                    <input type="text" id="filament-type" placeholder="Ej. PLA, ABS">
                </div>
                <div class="field">
                    <label for="filament-cost">Precio de la Bobina (COP):</label>
                    <input type="number" id="filament-cost" value="100000" step="0.01">
                </div>
                <div class="field">
                    <label for="filament-weight">Peso de la Bobina (kg):</label>
                    <input type="number" id="filament-weight" value="1" step="0.1">
                </div>
                <div class="field">
                    <label for="margin-percentage">Margen de Ganancia (%):</label>
                    <input type="number" id="margin-percentage" value="30" step="0.1">
                </div>
            </div>

            <!-- Electricidad -->
            <div class="section">
                <h2>Electricidad</h2>
                <div class="field">
                    <label for="electricity-consumption">Consumo de Energía (kWh):</label>
                    <input type="number" id="electricity-consumption" value="0.3" step="0.01">
                </div>
                <div class="field">
                    <label for="electricity-cost">Costo por kWh (COP):</label>
                    <input type="number" id="electricity-cost" value="600" step="0.01">
                </div>
            </div>

            <!-- Coste de mano de obra -->
            <div class="section">
                <h2>Coste de Mano de Obra</h2>
                <div class="field">
                    <label for="prep-time">Preparación (horas):</label>
                    <input type="number" id="prep-time" value="0.5" step="0.1">
                </div>
                <div class="field">
                    <label for="prep-cost">Costo por Hora de Preparación (COP):</label>
                    <input type="number" id="prep-cost" value="20000" step="0.01">
                </div>
                <div class="field">
                    <label for="postprocessing-time">Postprocesamiento (horas):</label>
                    <input type="number" id="postprocessing-time" value="1" step="0.1">
                </div>
                <div class="field">
                    <label for="postprocessing-cost">Costo Total de Postprocesamiento (COP):</label>
                    <input type="number" id="postprocessing-cost" value="15000" step="0.01">
                </div>
            </div>

            <!-- Coste de mantenimiento de la máquina -->
            <div class="section">
                <h2>Coste de Mantenimiento de la Máquina</h2>
                <div class="field">
                    <label for="machine-cost">Costo de la Máquina (COP):</label>
                    <input type="number" id="machine-cost" value="2000000" step="0.01">
                </div>
                <div class="field">
                    <label for="roi-years">Retorno de Inversión (años):</label>
                    <input type="number" id="roi-years" value="3" step="0.1">
                </div>
                <div class="field">
                    <label for="daily-use">Uso Comercial Diario (horas):</label>
                    <input type="number" id="daily-use" value="8" step="0.1">
                </div>
                <div class="field">
                    <label for="repair-percentage">Porcentaje de Costos de Reparación (%):</label>
                    <input type="number" id="repair-percentage" value="10" step="0.1">
                </div>
            </div>

            <!-- Otros Costes -->
            <div class="section">
                <h2>Otros Costes</h2>
                <div class="field">
                    <label for="other-costs">Otros Costes Adicionales (COP):</label>
                    <input type="number" id="other-costs" value="5000" step="0.01">
                </div>
            </div>

            <!-- IVA -->
            <div class="section">
                <h2>IVA</h2>
                <div class="field">
                    <label for="tax-rate">Porcentaje de IVA (%):</label>
                    <input type="number" id="tax-rate" value="19" step="0.1">
                </div>
            </div>

        </form>

        <div class="results" id="results">
            <h2>Resultados:</h2>
            <div id="material-cost">Costo de Material: $0.00</div>
            <div id="energy-cost">Costo de Energía: $0.00</div>
            <div id="depreciation-cost">Costo de Desgaste: $0.00</div>
            <div id="maintenance-cost-result">Costo de Mantenimiento: $0.00</div>
            <div id="labor-cost">Costo de Mano de Obra: $0.00</div>
            <div id="other-cost">Otros Costes: $0.00</div>
            <div id="base-cost">Costo Base: $0.00</div>
            <div id="profit">Ganancia: $0.00</div>
            <div id="tax">IVA: $0.00</div>
            <div id="total-cost">Costo Total: $0.00</div>
        </div>
    </div>
    <script>
        const form = document.getElementById('calculator-form');
        const currencySelect = document.getElementById('currency');

        function formatCurrency(value) {
            const currency = currencySelect.value;
            const formatter = new Intl.NumberFormat(currency === 'COP' ? 'es-CO' : 'en-US', {
                style: 'currency',
                currency: currency
            });
            return formatter.format(value);
        }

        function calculateCosts() {
            // Obtener valores
            const filamentCost = parseFloat(document.getElementById('filament-cost').value);
            const modelWeight = parseFloat(document.getElementById('model-weight').value);
            const filamentWeight = parseFloat(document.getElementById('filament-weight').value);
            const electricityConsumption = parseFloat(document.getElementById('electricity-consumption').value);
            const electricityCost = parseFloat(document.getElementById('electricity-cost').value);
            const printTime = parseFloat(document.getElementById('print-time').value);
            const machineCost = parseFloat(document.getElementById('machine-cost').value);
            const roiYears = parseFloat(document.getElementById('roi-years').value);
            const dailyUse = parseFloat(document.getElementById('daily-use').value);

            // Calcular costos
            const materialCost = (filamentCost / filamentWeight) * (modelWeight / 1000);
            const energyCost = electricityConsumption * electricityCost * printTime;
            const depreciationCost = machineCost / (roiYears * 365 * dailyUse);
            const maintenanceCost = depreciationCost * parseFloat(document.getElementById('repair-percentage').value) / 100;
            const laborCost = (parseFloat(document.getElementById('prep-time').value) + parseFloat(document.getElementById('postprocessing-time').value)) * parseFloat(document.getElementById('prep-cost').value);
            const otherCost = parseFloat(document.getElementById('other-costs').value);
            const profit = (materialCost + energyCost + depreciationCost + maintenanceCost + laborCost + otherCost) * parseFloat(document.getElementById('margin-percentage').value) / 100;

            // Mostrar resultados
            document.getElementById('material-cost').textContent = `Costo de Material: ${formatCurrency(materialCost)}`;
            document.getElementById('energy-cost').textContent = `Costo de Energía: ${formatCurrency(energyCost)}`;
            document.getElementById('depreciation-cost').textContent = `Costo de Desgaste: ${formatCurrency(depreciationCost)}`;
            document.getElementById('maintenance-cost-result').textContent = `Costo de Mantenimiento: ${formatCurrency(depreciationCost)}`;
            document.getElementById('base-cost').textContent = `Costo Base: ${formatCurrency(materialCost + energyCost + depreciationCost)}`;
            document.getElementById('total-cost').textContent = `Costo Total: ${formatCurrency(materialCost + energyCost + depreciationCost)}`;
            document.getElementById('labor-cost').textContent = `Costo de Mano de Obra: ${formatCurrency(laborCost)}`;
            document.getElementById('other-cost').textContent = `Otros Costes: ${formatCurrency(otherCost)}`;
            document.getElementById('profit').textContent = `Ganancia: ${formatCurrency(profit)}`;
            document.getElementById('tax').textContent = `IVA: ${formatCurrency((materialCost + energyCost + depreciationCost + laborCost + otherCost + profit) * parseFloat(document.getElementById('tax-rate').value) / 100)}`;
            document.getElementById('total-cost').textContent = `Costo Total: ${formatCurrency(materialCost + energyCost + depreciationCost + laborCost + otherCost + profit + (parseFloat(document.getElementById('tax').textContent.replace(/[^0-9.-]+/g,'')) || 0))}`;
        }

        form.addEventListener('input', calculateCosts);
    </script>
</body>
</html>
